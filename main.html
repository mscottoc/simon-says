<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Simon</title>
    <script>
      var highScore = 0;
      var sequence = ["yellow", "green", "blue"];
      var inputSequence = [];
      const yellow = document.getElementById("yellow");
      const blue = document.getElementById("blue");
      const red = document.getElementById("red");
      const green = document.getElementById("green");

      function gameLoop() {
        document.getElementById("start").style.visibility = "hidden";
        var score = 0;
        var input = "none";
        let id = null;
        showColor(0);
        document.getElementById("high-score").innerHTML =
          "High Score: " + highScore;
        while (true) {
          document.getElementById("score").innerHTML = "Score: " + score;
          if (score > highScore) {
            high_score = score;
            document.getElementById("high-score").innerHTML =
              "High Score: " + high_score;
          }
          if (!newTurn()) {
            input = [];
            sequence = [];
            return;
          }
          score++;
        }
      }

      //resets the color of all the buttons to default
      function resetColor() {
        yellow.style.backgroundColor = "";
        blue.style.backgroundColor = "";
        red.style.backgroundColor = "";
        green.style.backgroundColor = "";
        console.log("colors reset");
      }

      //flashes the colors in order of the sequence
      function showColor() {
        let id = null;
        sequenceI = sequence;
        id = setInterval(flash, 1000);
        function flash() {
        let place = 0;
        let stage = 0;
          if (place < sequence.length) {
            switch (sequence[place]) {
              case "yellow":
                if (stage) {
                  get.style.backgroundColor = "";
                  place++;
                  stage = 0;
                } else {
                  yellow.style.backgroundColor = "lightyellow";
                  stage = 1;
                }
                break;
              case "blue":
                if (stage) {
                  blue.style.backgroundColor = "";
                  place++;
                  stage = 0;
                } else {
                  blue.style.backgroundColor = "lightblue";
                  stage = 1;
                }
                break;
              case "red":
                if (stage) {
                  red.style.backgroundColor = "";
                  place++;
                  stage = 0;
                } else {
                  red.style.backgroundColor = "lightpink";
                  stage = 1;
                }
                break;
              case "green":
                if (stage) {
                  green.style.backgroundColor = "";
                  place++;
                  stage = 0;
                } else {
                  green.style.backgroundColor = "lightgreen";
                  stage = 1;
                }
                break;
            }
          } else {
            clearInterval(id);
          }
        }
      }

      function newColor() {
        switch (Math.random % 4) {
          case 0:
            return "yellow";
          case 1:
            return "blue";
          case 2:
            return "red";
          case 3:
            return "green";
        }
      }

      function newTurn() {
        sequence = [sequence, newColor()];
        showColor(0);
        return false;
      }
    </script>
  </head>
  <body>
    <div id="title"><h1>Simon Says!</h1></div>
    <div id="group">
      <button id="yellow">yellow</button>
      <button id="blue">blue</button>
      <button id="red">red</button>
      <button id="green">green</button>
      <button id="start" onclick="gameLoop()">Start</button>
      <h2 id="score"></h2>
      <h2 id="high-score"></h2>
    </div>
  </body>
</html>

<style>
  body {
    font-family: "Courier New", Courier, monospace;
  }
  #group {
    display: grid;
    grid-template: 1fr 1fr;
  }

  #title {
    margin: 0 auto;
    grid-row: 1/2;
    grid-column: 1/3;
    text-align: center;
  }
  #yellow,
  #blue,
  #red,
  #green {
    width: 200px;
    height: 200px;
    margin-top: auto;
    margin-bottom: auto;
    color: white;
    text-align: center;
    line-height: 200px;
    font-family: "Courier New", Courier, monospace;
    font-weight: bold;
    font-size: xx-large;
    margin-bottom: 20px;
    border-radius: 50px;
    border-style: ridge;
  }

  #yellow,
  #red {
    margin-left: auto;
    margin-right: 10px;
    grid-column: 1/2;
  }
  #blue,
  #green {
    margin-left: 10px;
    margin-right: auto;
    grid-column: 2/3;
  }
  #yellow {
    background-color: yellow;
    border-color: yellow;
    grid-row: 1;
  }
  #yellow:hover {
    background-color: darkgoldenrod;
    color: gray;
  }
  #blue {
    background-color: blue;
    border-color: blue;
    grid-row: 1;
  }
  #blue:hover {
    background-color: darkblue;
    color: gray;
  }
  #red {
    background-color: red;
    border-color: red;
    grid-row: 2/3;
  }
  #red:hover {
    background-color: darkred;
    color: gray;
  }
  #green {
    background-color: green;
    border-color: green;
    grid-row: 2/3;
  }
  #green:hover {
    background-color: darkgreen;
    color: gray;
  }
  #start {
    border-style: ridge;
    border-color: white;
    font-size: large;
    font-family: "Courier New", Courier, monospace;
    margin: 0 auto;
    padding: 20px;
    border-radius: 50px;
    font-weight: bold;
    grid-column: 1/3;
  }
  #start:hover {
    background-color: gray;
  }
</style>
